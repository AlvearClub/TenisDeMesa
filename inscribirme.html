<html>
<head>
  <meta charset="utf-8"/>
  <meta name="description" content="AlvearClub"/>
  <meta name="keywords" content=""/>
  <title>InscripcionTMT</title>
  <link rel="stylesheet" href="cssAlvear.css"/>
  <link rel="stylesheet" href="cssForm.css"/>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Bodoni+Moda:ital@1&display=swap" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Bodoni+Moda:ital@1&family=Roboto&display=swap" rel="stylesheet">
<style>
        table, th, td
        {
            margin:10px 0;
            border:solid 1px #333;
            padding:2px 4px;
            font:15px Verdana;
        }
        th {
            font-weight:bold;
        }

 #loader {
  border: 16px solid #f3f3f3;
  border-radius: 50%;
  border-top: 16px solid blue;
  border-bottom: 16px solid blue;
  width: 60px;
  height: 60px;
  -webkit-animation: spin 2s linear infinite;
  animation: spin 2s linear infinite;
  visibility:hidden;
}

 @-webkit-keyframes spin {
  0% { -webkit-transform: rotate(0deg); }
  100% { -webkit-transform: rotate(360deg); }
}

 @keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

</style>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
<script>
  var script_url = "https://script.google.com/macros/s/AKfycbwv-JOPJhbSqlQ3ADBbo2_KhK3rBsZDcWap6XG46j1Tz68hf043/exec";


  var str="";
  $(document).ready(function() {

  $('[name="checks[]"]').click(function() {

    var arr = $('[name="checks[]"]:checked').map(function(){
      return this.value;
    }).get();

    str = arr.join('');

    $('#arr').text(JSON.stringify(arr));

    $('#str').text(str);

    });

  });

  // Make an AJAX call to Google Script
  function insert_value() {

	$("#re").css("visibility","hidden");
	 document.getElementById("loader").style.visibility = "visible";
	$('#mySpinner').addClass('spinner');




  var id1=	$("#id").val();
	var name= $("#name").val();
  var contact= $("#contact").val();
  var categories=str;
  name= name + ", " + contact + ", " + categories;




    var url = script_url+"?callback=ctrlq&id="+id1+"&name"+name+"contact"+contact+"&str"+categories+"&action=insert";

    var request = jQuery.ajax({
      crossDomain: true,
      url: url ,
      method: "GET",
      dataType: "jsonp"
    });
    console.log(request);
  }
  // print the returned data
  function ctrlq(e) {


	$("#re").html(e.result);
	$("#re").css("visibility","visible");
	read_value();

  }

 function read_value() {

 $("#re").css("visibility","hidden");

   document.getElementById("loader").style.visibility = "visible";
  var url = script_url+"?action=read";

 $.getJSON(url, function (json) {

    // Set the variables from the results array

        // CREATE DYNAMIC TABLE.
        var table = document.createElement("table");
        var header = table.createTHead();
		var row = header.insertRow(0);
		var cell1 = row.insertCell(0);
		var cell2 = row.insertCell(1);
    var cell3 = row.insertCell(2);

		cell1.innerHTML = "<b>Codigo TMT</b>";
		cell2.innerHTML = "<b>Nombre y Apellido</b>";
    cell3.innerHTML = "<b>Celular</b>";

        // ADD JSON DATA TO THE TABLE AS ROWS.
        for (var i = 0; i < json.records.length; i++) {

        tr = table.insertRow(-1);
				var tabCell = tr.insertCell(-1);
        tabCell.innerHTML = json.records[i].ID;
				tabCell = tr.insertCell(-1);
				tabCell.innerHTML = json.records[i].NAME;
        tabCell = tr.insertCell(-1);
        tabCell.innerHTML = json.records[i].PHONE;

        }


        // FINALLY ADD THE NEWLY CREATED TABLE WITH JSON DATA TO A CONTAINER.
        var divContainer = document.getElementById("showData");
        divContainer.innerHTML = "";
        divContainer.appendChild(table);
		document.getElementById("loader").style.visibility = "hidden";
		$("#re").css("visibility","visible");
    });
	}

  </script>


</head>

<body id="Cuerpo" style="color:white;">
<div align="center">
  <div class="row justify-content-md-center" style= "margin-top:3vh;">
      <div class="col md-4 text-center">
          <img src="Logo.png" id="imagen" style="width:25vh">
      </div>
  </div>
<div class="container-fluid" style="text-align:left;">
  <div class="row">
  <div class="col-12">
  <form id="hoy">
    <div class="form-group">
      <label for="exampleInputEmail1">Nombre y Apellido</label>
      <input style="width:40vh;" type="text" class="form-control" name ="name" id="name" placeholder="Ingresar Nombre y Apellido">
      <small style="color:red">Campo obligatorio*</small>
    </div>
    <div class="form-group">
      <label for="exampleInputEmail1">Código TMT</label>
      <input type="text" class="form-control" name ="id" id="id" style="width:25vh;"placeholder="Ingresar Codigo TMT">
      <small style="color:red">Campo obligatorio*</small>
    </div>
    <div class="form-group">
      <label for="exampleInputEmail1">Numero de celular</label>
      <input style="width:40vh;" type="text" name ="contact" id="contact" class="form-control"placeholder="Ingresar Numero Celular">
      <small style="color:red">Campo obligatorio*</small>
    </div>
    <label for="exampleInputEmail1" style="margin-bottom:3vh;">Categorías a participar:</label>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" name="checks[]" value="4ta" id="defaultCheck4" style="width:3vh; height: 3vh;" >
      <p>4ta Categoría </p>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" name="checks[]" value="3ra" id="defaultCheck3" style="width:3vh; height: 3vh;" >
      <p>3ra Categoría</p>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" name="checks[]" value="2da" id="defaultCheck2" style="width:3vh; height: 3vh;" >
      <p> 2da Categoría</p>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" name="checks[]" value="1ra" id="defaultCheck1"  style="width:3vh; height: 3vh;" >
      <p>1ra Categoría</p>
    </div>
    <div id="loader" style="display:none;"></div>

    <button type="submit" class="btn btn-primary" id = "b1" onClick="insert_value()" value = "Insert" style="height: 8vh; width: 20vh; font-size: 3vh;margin-top:2.5vh;">Inscribirme</button>
    <div id="showData">
    </div>
  </form>

  <form action="" class="formulario">
    <h1 style="font-family: 'Poppins', sans-serif; font-size:4vh; margin-bottom:4vh;">
      Inscripción 44° TMT <br> Alvear Nittaku</h1>
    <input type="text" class="formulario__input" name="name" id="name">
    <label for="" class="formulario__label">Nombre y Apellido</label>
    <input type="text" class="formulario__input" name="id" id="id" style="width:17vh;">
    <label for="" class="formulario__label">Codigo TMT</label>
    <input type="text" class="formulario__input" name="contact" id="contact" style="width:25vh;">
    <label for="" class="formulario__label">Celular(contacto)</label>


    <label style="font-size: 2vh; margin-bottom:3.5vh;">Metodo de pago</label>
    <select id="e3" style="width:70%; height:5vh; background:#052f6e; color:white; font-size:2vh; margin-bottom:5vh;" class="form-select" aria-label="Default select example">
      <option value="Efectivo" style="font-size:1.3vw;">Efectivo</option>
      <option value="Transferencia bancaria" style="font-size:1.3vw;">Transferencia Bancaria</option>
      <option value="Mercado pago" style="font-size:1.3vw;">Mercado Pago</option>
    </select>


    <label style="font-size: 2vh; margin-bottom:3.5vh;">Categorias a participar:</label>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" name="checks[]" value="4ta" id="defaultCheck4" style="width:3vh; height: 3vh;" >
      <p style="font-size:2.5vh;">4ta Categoría - 10:30 hs</p>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" name="checks[]" value="3ra" id="defaultCheck3" style="width:3vh; height: 3vh;" >
      <p style="font-size:2.5vh;">3ra Categoría - 13:00 hs</p>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" name="checks[]" value="2da" id="defaultCheck2" style="width:3vh; height: 3vh;" >
      <p style="font-size:2.5vh;"> 2da Categoría - 15:30 hs</p>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" name="checks[]" value="1ra" id="defaultCheck1"  style="width:3vh; height: 3vh;" >
      <p style="font-size:2.5vh;">1ra Categoría - 18:00 hs</p>
    </div>
    <div id="loader" style="display:none;"></div>

    <button type="submit" class="btn" id = "b1" onClick="insert_value()" value = "Insert" style="height: 8vh; width: 100%; font-size: 3vh;margin-top:4.5vh; border:1px solid white; color:white;">Inscribirme</button>
    <div id="showData">
    </div>
  </form>


  </div>
  </div>
</div>

<div id="content" class="col-lg-12">
    <div id="final" class="col-lg-12" style="display:none">

      <div class="row text-center">
        <h2>Gracias por inscribirte, esperamos verte en el torneo, mucha suerte.</h2>
        </div>
        <div class="row " style="margin-top: 2vh;">

        <div class="col-xl-4" style="margin-top:2vh; margin-bottom: 2vh;">
        <a href="indexinscripcion.html"><button class="btn btn-primary" style="height: 8vh; width: 30vh; font-size: 3vh; margin-top:2vh; ">Volver</button></a>
        </div>
        <div class="col-xl-4" style="margin-top:2vh; margin-bottom: 2vh;">
        <a href="inscribirme.html"><button class="btn btn-primary" style="height: 8vh; width: 40vh; font-size: 3vh; margin-top:2vh;">Agregar otra inscripcion</button></a>
        </div>
        <div class="col-xl-4" style="margin-top:2vh; margin-bottom: 2vh;">
        <a href="menulistados.html"><button class="btn btn-primary" style="height: 8vh; width: 40vh; font-size: 3vh; margin-top:2vh;">Ver listado de inscriptos</button></a>
        </div>
        </div>

    </div>
</div>
<script src="https://code.jquery.com/jquery-3.2.1.js"></script>
<script type="text/javascript">
var inputs = document.getElementsByClassName('formulario__input');
for (var i = 0; i < inputs.length; i++) {
  inputs[i].addEventListener('keyup', function(){
    if(this.value.length>=1) {
      this.nextElementSibling.classList.add('fijar');
    } else {
      this.nextElementSibling.classList.remove('fijar');
    }
  });
}
$(document).ready(function(){
    $("#b1").on('click', function() {
        $("#hoy").hide();
        $("#final").show();
        return false;
    });

});
</script>

<div class="text-center">
<p style="font-size:1.5vh; margin-top:6vh; margin-bottom:3vh;padding-right:3.6vh;color: white;">© Alvear Club Tenis de Mesa 2021 | Todos los derechos reservados.</p>
</div>

</div>
</body>
<html>
